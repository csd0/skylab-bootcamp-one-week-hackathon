<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
    	<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<script src="ticketmaster-api-0.5.js"></script>
		<title>test básico</title>
</head>
<body>
	<h1>Testeo rápido de la API (consulta la consola)</h1>
	<script type="text/javascript">

		/*
		Referencia para desarrollo de la api:
		=====================================

		segmentName  ----- 	segmentId
		NAME    			ID
		Music    			KZFzniwnSyZfZ7v7nJ
		Sports    			KZFzniwnSyZfZ7v7nE
		Arts & Theatre    	KZFzniwnSyZfZ7v7na
		Film    			KZFzniwnSyZfZ7v7nn
		Miscellaneous    	KZFzniwnSyZfZ7v7n1
		*/


		function handlerDataReceived(res){
			/* Recorrer los resultados obtenidos */
			for(let i = 0; i < res.length; i++){
				console.log('\n\n\n\n');
				console.log('---------------------------------');
				console.log('---------------------------------');
				console.log('---------------------------------');
				console.log('Todo el objeto:');
				console.log(res[i]);
				showEvent(res[i]);
			}
		}


		function showEvent(event){
			console.log('---------------------------------');
			console.log(`event classifications genre name: ${event.classifications[0].genre.name}`)
			console.log(`event classifications segment name: ${event.classifications[0].segment.name}`)
			console.log(`event classifications subgenre name: ${event.classifications[0].subGenre.name}`)
			console.log('---------------------------------');
			console.log(`timezone: ${event.dates.timezone}`);
			console.log(`start local date: ${event.dates.start.localDate}`);
			console.log(`start local time: ${event.dates.start.localTime}`);
			console.log(`date TBA: ${event.dates.start.dateTBA}`);
			console.log(`date TBD: ${event.dates.start.dateTBD}`);
			console.log(`datetime: ${event.dates.start.dateTime}`);
			console.log(`noSpecificTime: ${event.dates.start.noSpecificTime}`);
			console.log(`timeTBA: ${event.dates.start.timeTBA}`);
			console.log(`date status code: ${event.dates.status.code}`);
			console.log('---------------------------------');
			console.log(`id: ${event.id}`);
			console.log(`name: ${event.name}`);
			console.log(`url: ${event.url}`);
			console.log(`promoter name: ${event.promoter.name}`);
			console.log('---------------------------------');
			console.log(`priceRanges currency: ${event.priceRanges[0].currency}`);
			console.log(`priceRanges min: ${event.priceRanges[0].min}`);
			console.log(`priceRanges max: ${event.priceRanges[0].max}`);
			console.log('---------------------------------');
			viewImages(event.images);
			console.log('\n\n\n\n');
		}

		// Ejemplo de búsqueda por ciudad española:
		ticketmasterApi.searchEventsOnASpanishCity('Barcelona').then(res => handlerDataReceived(res._embedded.events)).catch(error => {throw new Error(error)});


		//Ejemplo de búsqueda por ciudad española y eventos de tipo musical:
		//ticketmasterApi.searchEventsOnASpanishCityAndSegmentName('Madrid', 'Music').then(res => handlerDataReceived(res._embedded.events)).catch(error => {throw new Error(error)});
		

		//Ejemplo de búsqueda por ciudad española y palabra clave:
		//ticketmasterApi.searchEventsOnASpanishCityAndKeyword('Madrid', 'U2').then(res => handlerDataReceived(res._embedded.events)).catch(error => {throw new Error(error)});


		//Ejemplo de búsqueda por ciudad española, eventos de tipo musical y palabra clave:
		//ticketmasterApi.searchEventsOnASpanishCityAndSegmentNameAndKeyword('Madrid', 'Music', 'U2').then(res => handlerDataReceived(res._embedded.events)).catch(error => {throw new Error(error)});


		//Ejemplo de búsqueda de los detalles de un evento:
		//ticketmasterApi.searchEventsDetails('Z598xZ2qZ6Akk').then(res => showDetailsOfEvent(res._embedded.events)).catch(error => {throw new Error(error)});


		function viewImages(arrayOfObjectsWithImages){
			for(let i = 0; i < arrayOfObjectsWithImages.length; i++){
				console.log(`\nData for image: ${i}`)
				for(let item in arrayOfObjectsWithImages[i]){
					console.log(`images: ${arrayOfObjectsWithImages[i][item]}`);
				}
			}
		}

		function showDetailsOfEvent(event){
			console.log('\n\n\n\n');
			console.log('---------------------------------');
			console.log('---------------------------------');
			console.log('---------------------------------');
			console.log('Todo el objeto:');
			console.log(event[0])
			console.log('---------------------------------');
			console.log(`Id: ${event[0]['id']}`);
			console.log(`Name: ${event[0]['name']}`);
			console.log(`url: ${event[0].url}`);
			console.log('---------------------------------');
			viewImages(event[0].images);
			console.log('---------------------------------');
			console.log(`timezone: ${event[0].dates.timezone}`);
			console.log(`start local date: ${event[0].dates.start.localDate}`);
			console.log(`start local time: ${event[0].dates.start.localTime}`);
			console.log(`date TBA: ${event[0].dates.start.dateTBA}`);
			console.log(`date TBD: ${event[0].dates.start.dateTBD}`);
			console.log(`datetime: ${event[0].dates.start.dateTime}`);
			console.log(`noSpecificTime: ${event[0].dates.start.noSpecificTime}`);
			console.log(`timeTBA: ${event[0].dates.start.timeTBA}`);
			console.log(`date status code: ${event[0].dates.status.code}`);
			console.log('---------------------------------');
			console.log(`priceRanges currency: ${event[0].priceRanges[0].currency}`);
			console.log(`priceRanges min: ${event[0].priceRanges[0].min}`);
			console.log(`priceRanges max: ${event[0].priceRanges[0].max}`);
			console.log('---------------------------------');
			console.log(`promoter name: ${event[0].promoter.name}`);
			console.log(`seatmap static url: ${event[0].seatmap.staticUrl}`);
			console.log('\n\n\n\n');
		}
	</script>
</body>
</html>